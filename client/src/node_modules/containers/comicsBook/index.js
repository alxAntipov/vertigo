import './comicsBook.css'

import React, {Component} from 'react'
import {connect} from 'react-redux'
import {addComicsToBasket, fetchComicsById} from 'actions'
import {getComicsById} from 'selectors'

class Comics extends Component {
    componentDidMount () {
        this.props.fetchComicsById(this.props.params.id)
    }
    renderContent () {
        const {comics} = this.props
        const {addComicsToBasket} = this.props
        return (
            <div className="comicsBook-content">
                <h2 className="comicsBook-title">
                    {comics.name}
                </h2>
                <div className="comicsBook-description">
                    <div className="comicsBook-img__border">
                        <img
                            className='comicsBook-img'
                            src={comics.image}
                            alt={comics.name}
                        />
                    </div>
                    <div className="comicsBook-text">
                        <p className="comicsBook-text__p">
                            <span className="comicsBook-text__p-bold">
                                Издательство:
                            </span> {comics.publish}
                        </p>
                        <p className="comicsBook-text__p">
                            <span className="comicsBook-text__p-bold">
                                Год издания:
                            </span> {comics.year}
                        </p>
                        <p className="comicsBook-text__p">
                            <span className="comicsBook-text__p-bold">
                                Количество старниц:
                            </span> {comics.sheets} страниц
                        </p>
                        <p className="comicsBook-text__p">
                            <span className="comicsBook-text__p-bold">
                                Размер:
                            </span> {comics.size}
                        </p>
                        <p className="comicsBook-text__p">
                            <span className="comicsBook-text__p-bold">
                                Цена:
                            </span> {comics.price}$
                        </p>
                        <p className="comicsBook-text__p">
                            <span className="comicsBook-text__p-bold">
                                Описание:
                            </span>
                        </p>
                        <p className="comicsBook-text__p">
                            {comics.description}
                        </p>
                        <button 
                            onClick={() => addComicsToBasket(comics.id)}
                            className="ComicsBook__btn"
                        >
                            Добавить в корзину
                        </button>
                    </div>
                </div>
            </div>
        )
    }
    render () {
        const {comics} = this.props
        return (
        <div>
            {comics && this.renderContent()}
        </div>
        )
    }
}

const mapStateToProps = state => ({
    comics: getComicsById(state, state.comicsBookPage.id)
})

const mapDispatchToProps = {
    addComicsToBasket,
    fetchComicsById
}

export default connect(mapStateToProps, mapDispatchToProps)(Comics)